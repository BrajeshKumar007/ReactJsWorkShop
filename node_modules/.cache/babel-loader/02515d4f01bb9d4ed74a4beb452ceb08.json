{"ast":null,"code":"var _jsxFileName = \"D:\\\\DEMO\\\\src\\\\pages\\\\Home\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport styles from \"./index.module.css\";\nimport service from \"utils/service\";\nimport CONSTANTS from \"utils/constants\";\nimport { useInfiniteQuery } from \"react-query\";\nimport MovieCard from \"components/MovieCard\";\nimport Skeleton from \"components/MovieCard/Skeleton\";\nimport { Grid } from \"@material-ui/core\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const [currentPage, setCurrentPage] = useState(0); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const fetchMovies = ({\n    pageParam = 1\n  }) => service.get(CONSTANTS.BASE_URL, `data/page${pageParam}.json`);\n\n  const {\n    data,\n    error,\n    fetchNextPage,\n    hasNextPage,\n    isSuccess,\n    isLoading,\n    refetch,\n    remove\n  } = useInfiniteQuery(`movies`, fetchMovies, {\n    getNextPageParam: (lastPage, pages) => {\n      return +lastPage.totalContent > currentPage * 20 ? currentPage + 1 : null;\n    },\n    onSuccess: () => {\n      setCurrentPage(currentPage + 1);\n    }\n  });\n  const allItems = (data === null || data === void 0 ? void 0 : data.pages.flatMap(page => page.contentItems)) || [];\n\n  const MoviesLoader = itemCount => {\n    return /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      children: [...new Array(itemCount)].map((_, i) => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 3,\n        children: /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.root,\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      justify: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 10,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          className: styles.movieListContainer,\n          children: [isLoading && MoviesLoader(8), isSuccess && (!!data ? /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n            dataLength: allItems.length,\n            next: fetchNextPage,\n            hasMore: hasNextPage || false,\n            loader: MoviesLoader(4),\n            style: {\n              overflow: \"hidden\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: allItems.map(({\n                name,\n                Poster\n              }) => /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                md: 3,\n                sm: 3,\n                children: /*#__PURE__*/_jsxDEV(MovieCard, {\n                  name,\n                  Poster\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 27\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }, this) : \"No Result\"), !!error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.errorMessageContainer,\n            children: JSON.stringify(error)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"O09nkHLMxDSfWEVpq5oi/syHFB4=\", false, function () {\n  return [useInfiniteQuery];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["D:/DEMO/src/pages/Home/index.tsx"],"names":["useState","styles","service","CONSTANTS","useInfiniteQuery","MovieCard","Skeleton","Grid","InfiniteScroll","Home","currentPage","setCurrentPage","fetchMovies","pageParam","get","BASE_URL","data","error","fetchNextPage","hasNextPage","isSuccess","isLoading","refetch","remove","getNextPageParam","lastPage","pages","totalContent","onSuccess","allItems","flatMap","page","contentItems","MoviesLoader","itemCount","Array","map","_","i","root","movieListContainer","length","overflow","name","Poster","errorMessageContainer","JSON","stringify"],"mappings":"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","sourcesContent":["import { useState, useEffect, ReactElement } from \"react\";\nimport styles from \"./index.module.css\";\nimport service from \"utils/service\";\nimport CONSTANTS from \"utils/constants\";\nimport { useInfiniteQuery } from \"react-query\";\nimport MovieCard, { MovieCardProps } from \"components/MovieCard\";\nimport Skeleton from \"components/MovieCard/Skeleton\";\nimport { Grid } from \"@material-ui/core\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\nconst Home = (): ReactElement => {\n  const [currentPage, setCurrentPage] = useState(0);\n// eslint-disable-line react-hooks/exhaustive-deps\n\n\n  const fetchMovies = ({ pageParam = 1 }) =>\n  service.get(CONSTANTS.BASE_URL,`data/page${pageParam}.json`);\n  const {\n    data,\n    error,\n    fetchNextPage,\n    hasNextPage,\n    isSuccess,\n    isLoading,\n    refetch,\n    remove,\n  } = useInfiniteQuery(`movies`, fetchMovies, {\n    getNextPageParam: (lastPage, pages) => {      \n      return +lastPage.totalContent > currentPage * 20 ? currentPage + 1 : null;\n    },\n    onSuccess: () => {\n      setCurrentPage(currentPage + 1);\n    },\n  });\n\n  const allItems = data?.pages.flatMap((page) => page.contentItems) || [];\n    const MoviesLoader = (itemCount: number): ReactElement => {\n    return (\n      <Grid container spacing={2}>\n        {[...new Array(itemCount)].map((_, i: number) => (\n          <Grid item xs={12} md={3} key={i}>\n            <Skeleton />\n          </Grid>\n        ))}\n      </Grid>\n    );\n  };\n\n  return (\n    <div className={styles.root}>\n      <Grid container justify=\"center\">\n        <Grid item xs={12} sm={10}>\n          <Grid item xs={12} className={styles.movieListContainer}>\n            {/* Loading state */}\n            {isLoading && MoviesLoader(8)}\n\n            {/* Success state */}\n            {isSuccess &&\n              (!!data ? (\n                <InfiniteScroll\n                  dataLength={\n                    allItems.length\n                  }\n                  next={fetchNextPage}\n                  hasMore={hasNextPage || false}\n                  loader={MoviesLoader(4)}\n                  style={{ overflow: \"hidden\" }}\n                >\n                  <Grid container spacing={2}>\n                    {allItems.map(({\n                          name,\n                          Poster,\n                        }: MovieCardProps) => (\n                          <Grid item xs={12} md={3} sm={3} >\n                            <MovieCard\n                             {...{ name, Poster }}\n                            />\n                          </Grid>\n                        )\n                      )}\n                  </Grid>\n                </InfiniteScroll>\n              ) : (\n                \"No Result\"\n              ))}\n\n            {/* Error state */}\n            {!!error && (\n              <div className={styles.errorMessageContainer}>\n                {JSON.stringify(error)}\n              </div>\n            )}\n          </Grid>\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}