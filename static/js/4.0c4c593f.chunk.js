(this.webpackJsonpdiagnal=this.webpackJsonpdiagnal||[]).push([[4],{101:function(e,t,a){e.exports={root:"Home_root__1JBnY",movieListContainer:"Home_movieListContainer__3kbho",errorMessageContainer:"Home_errorMessageContainer__2diO7"}},106:function(e,t,a){e.exports={root:"AppHeader_root__CJ9jg",backBtn:"AppHeader_backBtn__1Jm2O",headerName:"AppHeader_headerName__1W0l5",searchBtn:"AppHeader_searchBtn__2ePlP",searchField:"AppHeader_searchField__52R4B"}},133:function(e,t,a){"use strict";a.r(t);var n=a(112),r=a(95),c=a(1),o=a(101),s=a.n(o),i=a(102),l=a.n(i),u=a(104),d=function(e){return"".concat(e)};function j(e,t,a){e.hasOwnProperty(t)&&(e[a]=e[t],delete e[t])}var h={get:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d(t+a)),{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.json()}));case 3:return n=e.sent,(r=n.page["content-items"].content).forEach((function(e){j(e,"poster-image","Poster")})),c={contentItems:r,totalContent:n.page["total-content-items"]},e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),post:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d(t),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(a)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},m={BASE_URL:"https://test.create.diagnal.com/"},p=a(135),x=a(93),b=a.n(x),f=a(123),O=a(124),v=a(126),g=a(125),_=a(7),C=function(e){var t=e.name,a="https://test.create.diagnal.com/images/"+e.Poster;return Object(_.jsx)(f.a,{className:b.a.root,children:Object(_.jsxs)(O.a,{className:b.a.cardArea,children:[Object(_.jsx)(g.a,{component:"img",alt:t,height:"400",image:a,title:t,className:b.a.poster}),Object(_.jsx)(v.a,{className:b.a.overText,children:Object(_.jsx)("p",{children:t})})]})})},N=a(127),w=a(128),y=function(){return Object(_.jsxs)(f.a,{className:b.a.root,children:[Object(_.jsxs)(O.a,{children:[Object(_.jsx)(N.a,{animation:"wave",variant:"rect",width:"100%",height:400}),Object(_.jsx)(v.a,{className:b.a.overText,children:Object(_.jsx)(N.a,{animation:"wave",variant:"text",width:"80%",height:40})})]}),Object(_.jsxs)(w.a,{className:b.a.actionsContainer,children:[Object(_.jsx)(N.a,{animation:"wave",variant:"text",width:100,height:40}),Object(_.jsx)(N.a,{animation:"wave",variant:"circle",width:40,height:40})]})]})},P=a(132),B=a(105),S=a(106),k=a.n(S),M=a(130),A=a(94),L=a.n(A),F=a(131),H=a(129),J=a(81),R=a(136),T=Object(H.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",backgroundColor:"#000000",border:"1px solid #737373"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10}}})),E=function(e){var t=e.onChange,a=e.className,n=T(),r=Object(c.useRef)(null),o=function(){if(r.current){var e={text:r.current.value,isClose:!1};t(e)}};return Object(_.jsxs)(J.a,{className:"".concat(n.root," ").concat(a),children:[Object(_.jsx)(R.a,{className:n.input,placeholder:"Search for a movie",inputRef:r,fullWidth:!0,onKeyPress:function(e){"Enter"===e.key&&o()}}),Object(_.jsx)(M.a,{type:"submit",className:n.iconButton,onClick:o,children:Object(_.jsx)(L.a,{})})]})};E.defaultProps={onChange:function(){}};var I=E,U=function(e){var t=e.onChange,a=Object(c.useState)(!1),n=Object(r.a)(a,2),o=n[0],s=n[1],i=function(e){t(e)};return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:k.a.root,children:[Object(_.jsx)("p",{className:k.a.headerName,children:o?"":"Romantic Comedy"}),o&&Object(_.jsx)("div",{style:{position:"absolute",margin:"0 10px"},children:Object(_.jsx)(I,{className:k.a.searchBox,onChange:i})}),o?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(M.a,{"aria-label":"directions",className:k.a.searchBtn,children:Object(_.jsx)(F.a,{onClick:function(){s(!1);i({text:"",isClose:!0})}})})}):Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(M.a,{"aria-label":"search",className:k.a.searchBtn,children:Object(_.jsx)(L.a,{onClick:function(){s(!o)}})})})]})})};t.default=function(){var e=Object(c.useState)(0),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)([]),l=Object(r.a)(i,2),u=l[0],d=l[1],j=Object(c.useState)(20),x=Object(r.a)(j,2),b=x[0],f=x[1],O=Object(c.useState)({}),v=Object(r.a)(O,2),g=v[0],N=v[1],w=function(e){var t=e.pageParam,a=void 0===t?1:t;return h.get(m.BASE_URL,"data/page".concat(a,".json"))},S=Object(p.a)("movies",w,{getNextPageParam:function(e,t){return+e.totalContent>a*b?a+1:null},onSuccess:function(){o(a+1)},onError:function(e){console.log("err",e),F=!1}}),k=S.data,M=S.error,A=S.fetchNextPage,L=S.hasNextPage,F=(S.isSuccess,S.isLoading);S.refetch,S.remove;Object(c.useEffect)((function(){0==g&&w({});var e=(null===k||void 0===k?void 0:k.pages.flatMap((function(e){return e.contentItems})))||[];d(e)}),[null===k||void 0===k?void 0:k.pages]);var H=function(e){return Object(_.jsx)(P.a,{container:!0,spacing:2,children:Object(n.a)(new Array(e)).map((function(e,t){return Object(_.jsx)(P.a,{item:!0,xs:12,md:3,children:Object(_.jsx)(y,{})},t)}))})};return Object(_.jsxs)("div",{className:s.a.root,children:[Object(_.jsx)(U,{onChange:function(e){console.log("abcd---",e),N(e.text);var t=e.text;if(d([]),t){var a=null===k||void 0===k?void 0:k.pages.flatMap((function(e){return e.contentItems})).filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));d(a),o(0),f(a.length),F=!1}else{var n=(null===k||void 0===k?void 0:k.pages.flatMap((function(e){return e.contentItems})))||[];d(n),o(0),f(n.length)}}}),Object(_.jsx)(P.a,{container:!0,justify:"center",children:Object(_.jsx)(P.a,{item:!0,xs:12,sm:10,children:Object(_.jsxs)(P.a,{item:!0,xs:12,className:s.a.movieListContainer,children:[F&&H(8),u.length>0?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(B.a,{dataLength:u.length,next:A,hasMore:L||!1,loader:H(3),style:{overflow:"hidden"},children:Object(_.jsx)(P.a,{container:!0,spacing:2,children:u.map((function(e){var t=e.name,a=e.Poster;return Object(_.jsx)(P.a,{item:!0,xs:4,md:3,sm:4,xl:6,lg:3,children:Object(_.jsx)(C,{name:t,Poster:a})})}))})})}):"No Result Found",!!M&&Object(_.jsx)("div",{className:s.a.errorMessageContainer,children:JSON.stringify(M)})]})})})]})}},93:function(e,t,a){e.exports={root:"MovieCard_root__2bcf8",cardArea:"MovieCard_cardArea__1J9BP",actionsContainer:"MovieCard_actionsContainer__1dvYF",poster:"MovieCard_poster__2Q8RD",overText:"MovieCard_overText__1Feuh"}}}]);
//# sourceMappingURL=4.0c4c593f.chunk.js.map